generator client {
  provider  = "prisma-client-py"
  interface = "asyncio"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  picture   String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  board     Board?
  todos     Todo[]
}

model Todo {
  id          String   @id @default(uuid())
  title       String
  description String?
  dueDate     String?
  pid         String   @unique
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  labels      String[]
  attachment  String[]
  phase       Phase    @relation(fields: [pid], references: [id])
  assigned    User[]
}

model Phase {
  id          String  @id @default(uuid())
  name        String
  description String?
  step        Int
  bid         String  @unique
  board       Board   @relation(fields: [bid], references: [id])
  todos       Todo?
}

model Board {
  id     String @id @default(uuid())
  title  String
  uid    String @unique
  owner  User   @relation(fields: [uid], references: [id])
  phases Phase?
}
